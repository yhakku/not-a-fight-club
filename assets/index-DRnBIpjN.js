(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(c){if(c.ep)return;c.ep=!0;const o=n(c);fetch(c.href,o)}})();const D=()=>{const t=document.querySelector("body"),e=document.querySelector(".header__nav"),n=document.querySelector(".logo"),l=location.hash.slice(1)||"login",c=()=>{e.classList.add("hidden"),n.classList.remove("hidden"),document.querySelector("body").classList.remove("overlay")},o=i=>{document.querySelectorAll("[data-route]").forEach(d=>{d.dataset.route!==i?d.classList.add("hidden"):d.classList.remove("hidden")})};switch(l){case"fight":o("fight"),e.classList.remove("hidden"),t.classList.add("fight-background");break;case"characters":o("characters"),n.classList.add("hidden"),e.classList.remove("hidden"),e.style.marginLeft="auto",t.classList.add("overlay");break;case"settings":o("settings"),n.classList.add("hidden"),e.classList.remove("hidden"),e.style.marginLeft="auto",t.classList.add("overlay");break;default:o("login"),t.classList.remove("fight-background"),c();break}window.addEventListener("hashchange",D)},oe="/not-a-fight-club/assets/Gojo-Bcl_rzc8.webp",ce="/not-a-fight-club/assets/Itadori-CVvoJYGM.webp",le="/not-a-fight-club/assets/Nanami-ClGyfAf8.webp",u={user:{nickname:null,avatarId:0,characters:[{name:"Gojo Satoru",maxHealth:110,health:110,damage:25,img:oe,attackChoice:null,defenceChoice:[],stats:{win:0,lose:0}},{name:"Yuji Itadori",maxHealth:100,health:100,damage:20,img:ce,attackChoice:null,defenceChoice:[],stats:{win:0,lose:0}},{name:"Kento Nanami",maxHealth:100,health:100,damage:20,img:le,attackChoice:null,defenceChoice:[],stats:{win:0,lose:0}}]},battle:null},F="data",v=t=>{localStorage.setItem(F,JSON.stringify(t))},q=()=>{const t=localStorage.getItem(F);return t?JSON.parse(t):u},B=(t,e)=>{const n=document.createElement("p");n.className="login__greeting h2",n.textContent=`Konnichiwa, ${e}!`,t.insertAdjacentElement("afterend",n)},G=(t,e)=>{t.classList.toggle("hidden",e)},O=(t,e)=>{t.forEach(n=>{n.classList.toggle("hidden",!e)})},K=(t,e,n)=>{t.classList.toggle("invalid",n),e.classList.toggle("invalid",n)},re=t=>{const e=document.querySelector(".login__greeting");e.innerHTML=`Konnichiwa, ${t}!`},z=(t,e,n)=>{t.classList.toggle("overlay",n),e.classList.toggle("hidden",n)},ie=t=>{document.addEventListener("click",e=>{const n=document.querySelector(".overlay");n&&e.target===n&&t()})},I=()=>{const t=document.querySelector("body");document.querySelector(".overlay");const e=document.querySelector(".logo"),n=document.querySelector(".characters__button-close"),l=document.querySelectorAll(".characters__nickname"),c=document.querySelectorAll(".characters__result-w"),o=document.querySelectorAll(".characters__result-l"),i=document.querySelectorAll(".characters__selected"),d=document.querySelector('a[href="#settings"]');let g=q();if(g.user.nickname){l.forEach(_=>{_.innerHTML=g.user.nickname}),g=q(),g.user.characters.forEach((_,L)=>{c[L]&&(c[L].innerHTML=_.stats.win),o[L]&&(o[L].innerHTML=_.stats.lose)});const r=g.user.avatarId??0;i[r].checked=!0,i.forEach((_,L)=>{_.addEventListener("change",()=>{_.checked&&i.forEach((S,C)=>{C!==L&&(S.checked=!1)}),g.user.avatarId=L,v(g)})})}let h=null,y=location.hash;window.addEventListener("hashchange",()=>{h=y,y=location.hash,y==="#characters"?d.classList.add("disabled"):d.classList.remove("disabled")});const m=()=>{t.classList.remove("overlay"),e.classList.remove("hidden"),h&&h!==y?location.hash=h:location.hash="#login"};n&&n.addEventListener("click",m),ie(m)},R=()=>{const t=document.querySelector("body"),e=document.querySelector(".logo"),n=document.querySelector(".settings__button-close"),l=document.querySelector('a[href="#characters"]'),c=document.querySelector(".change-name__form"),o=document.querySelector(".change-name__input");document.querySelector(".login__title");const i=q();let d=i.user.nickname;i.user.nickname?(o.placeholder=d,console.log(o.placeholder)):location.hash="#login",c.addEventListener("submit",y=>{y.preventDefault(),d=o.value.trim(),u.user.nickname=d,v(u),I(),re(d),z(t,e,!1),history.back()});let g=location.hash;window.addEventListener("hashchange",()=>{g=location.hash,g==="#settings"?l.classList.add("disabled"):l.classList.remove("disabled")});const h=()=>{z(t,e,!1),history.back()};n&&n.addEventListener("click",h)},de=()=>{const t=document.querySelector(".login__title"),e=document.querySelector(".form"),n=document.querySelector(".form__form-container"),l=document.querySelector(".form__input"),c=document.querySelector(".form__error"),o=document.querySelector(".login__button-fight"),i=document.querySelector(".login__button-chars"),d=document.querySelector(".login__button-settings");let h=q().user.nickname;h===null?(n.style.paddingBottom="10px",l.focus(),O([o,i,d],!1)):(G(e,!0),B(t,h)),e.addEventListener("submit",y=>{if(y.preventDefault(),h=l.value.trim(),h)G(e,!0),B(t,h),O([o,i,d],!0);else return;u.user.nickname=h,v(u),I(),R()}),l.addEventListener("input",()=>{const y=l.validity;l.setCustomValidity(" "),y.patternMismatch?K(l,c,!0):(K(l,c,!1),l.setCustomValidity(""))})},he="/not-a-fight-club/assets/Ken-BK2qzEHh.webp",ue="/not-a-fight-club/assets/Sukuna-DzGC8WWi.webp",me="/not-a-fight-club/assets/Todzi-DFkH5va8.webp",ge=()=>{const t=document.querySelector(".login__button-fight"),e=document.querySelector(".fight__fight-button"),n=document.querySelectorAll(".attack-panel .fight__button"),l=document.querySelectorAll(".defence-panel .fight__button"),c=document.querySelector('a[href="#characters"]'),o=document.querySelector('a[href="#settings"]'),i=["Head","Neck","Body","Belly","Legs"],d=[{name:"Kenjaku",maxHealth:100,health:100,damage:20,attackZone:1,defenceZone:2,img:he},{name:"Sukuna",maxHealth:110,health:110,damage:25,attackZone:2,defenceZone:2,img:ue},{name:"Fushiguro Toji",maxHealth:100,health:100,damage:20,attackZone:1,defenceZone:3,img:me}],g=()=>{const a=Math.floor(Math.random()*d.length);return d[a]},h=q();h.user.nickname&&(u.user.nickname=h.user.nickname);const y=()=>u.user.characters[h.user.avatarId];let m=g(),r=y();const _=()=>{const a=document.querySelector(".fight__card--antagonist");a.innerHTML=`
      <div class="fight__image-container">
        <img
          class="fight__image"
          src=${m.img}
          alt=${m.name}
          width="260"
          height="320"
          loading="lazy"
        >
      </div>
      <div class="fight__hp-control hp-control">
        <div class="hp-control__full">
          <span class="hp-control__hp-enemy"></span>
        </div>
          <span class="hp-control__amount">
            <span class="hp-control__count-enemy">${m.health}</span>
              /${m.maxHealth}
          </span>
        </div>`;const s=document.querySelector(".hp-control__hp-enemy");s.style.width=`${m.health}%`},L=()=>{n.forEach(a=>{a.addEventListener("click",()=>{n.forEach(s=>{s.classList.remove("selected"),a.classList.add("selected"),r.attackChoice=a.textContent,S()})}),l.forEach(s=>{s.addEventListener("click",()=>{const f=s.textContent;r.defenceChoice.includes(f)?(r.defenceChoice=r.defenceChoice.filter(p=>p!==f),s.classList.remove("selected")):r.defenceChoice.length<2&&(r.defenceChoice.push(f),s.classList.add("selected")),S()})})})},S=()=>{r.attackChoice&&r.defenceChoice.length===2?e.classList.remove("disabled"):e.classList.add("disabled")};L(),S();const C=()=>{const a=document.querySelector(".fight__card--protagonist");a.innerHTML=`
      <div class="fight__image-container">
        <img
          class="fight__image"
          src=${r.img}
          alt=${r.name}
          width="260"
          height="320"
          loading="lazy"
        >
      </div>
      <div class="fight__hp-control hp-control">
        <div class="hp-control__full">
          <span class="hp-control__hp-player"></span>
        </div>
          <span class="hp-control__amount">
            <span class="hp-control__count-player">${r.health}</span>
              /${r.maxHealth}
          </span>
        </div>`;const s=document.querySelector(".hp-control__hp-player");s.style.width=`${r.health}%`},P=()=>{u.battle={player:{...r},enemy:{...m},log:[]},_(),C()},A=()=>Math.floor(Math.random()*100)<20,V=()=>{const{player:a,enemy:s,log:f}=u.battle,{enemyAttackZone:p,enemyDefenceZone:Y}=J(),W=document.querySelector(".hp-control__hp-player"),U=document.querySelector(".hp-control__hp-enemy"),T=document.querySelector(".logs__list"),Q=document.querySelector(".hp-control__count-player"),X=document.querySelector(".hp-control__count-enemy"),x=A(),Z=A(),j=1.5;let k=a.damage,b=s.damage,H=Y.join(" ").includes(r.attackChoice),$=r.defenceChoice.join(" ").includes(p.join(""));H&&(k=0),$&&(b=0),x?k*=j:H&&(k=0),Z?b*=j:$&&(b=0),H&&!x&&(k=0),$&&!Z&&(b=0),s.health-=k,a.health-=b;const ee=()=>(a.health<0&&(a.health=0),a.health),te=()=>(s.health<0&&(s.health=0),s.health);W.style.width=`${ee()}%`,U.style.width=`${te()}%`,Q.innerHTML=`${a.health}`,X.innerHTML=`${s.health}`;const N=(M,E,ne,ae,fe)=>{ne.forEach(se=>{f.unshift(`<span class="logs__accent">${M.name}</span> attacks
         <span class="logs__accent">${E.name}</span>, dealing
         <span class="logs__accent">${ae}</span> damage by hitting ${se}`)})};N(a,s,[r.attackChoice],k),N(s,a,p,b),a.health<=0&&s.health<=0?(f.unshift('<span class="logs__accent">Draw!</span>'),a.stats.win+=1,a.stats.lose+=1,v(u),w()):a.health<=0?(f.unshift(`<span class="logs__accent">${s.name}</span> wins!`),a.stats.lose+=1,v(u),w()):s.health<=0&&(f.unshift(`<span class="logs__accent">${a.name}</span> wins!`),a.stats.win+=1,v(u),w()),T.innerHTML="",f.forEach(M=>{const E=document.createElement("li");E.classList.add("logs__item"),E.innerHTML=M,T.appendChild(E)}),v(u)},J=()=>{const s=[...i].sort(()=>.5-Math.random()).slice(0,m.attackZone),p=[...i].sort(()=>.5-Math.random()).slice(0,m.defenceZone);return{enemyAttackZone:s,enemyDefenceZone:p}},w=()=>{const a=document.querySelector(".attack-panel");e.style.display="none";const s=document.createElement("button");s.classList.add("fight__reset-button"),a.insertAdjacentElement("afterend",s),s.addEventListener("click",()=>{const f=u.user.avatarId;r={...u.user.characters[f],attackChoice:null,defenceChoice:[],health:u.user.characters[f].maxHealth},m={...m,health:m.maxHealth},u.battle={player:{...r},enemy:{...m},log:[]},_(),C(),s.style.display="none",e.style.display="flex",n.forEach(p=>p.classList.remove("selected")),l.forEach(p=>p.classList.remove("selected")),S()})};c.classList.add("disabled"),o.classList.add("disabled"),e.addEventListener("click",V),t.addEventListener("click",P),window.addEventListener("load",P)};D();de();I();R();ge();
